<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#0a0e27">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>GearNest - Your Digital Vault</title>
    <meta name="application-name" content="GearNest">
    <meta name="apple-mobile-web-app-title" content="GearNest">
    <meta name="description" content="Track and manage your gadgets, games, and digital collection.">
    <link rel="manifest" href="./manifest.json">
    
    <!-- App Icons -->
    <link rel="icon" type="image/svg+xml" href="./icons/icon.svg">
    <link rel="icon" type="image/png" sizes="192x192" href="./icons/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-180.png">

    <!-- DOMPurify for XSS Protection -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/app.css">
</head>
<body>

    <!-- Loading Screen -->
    <div id="loadingScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); z-index: 10001; display: flex; align-items: center; justify-content: center; flex-direction: column;">
        <!-- Animated Loading Icon -->
        <div style="position: relative; width: 80px; height: 80px; margin-bottom: 30px;">
            <div class="loading-spinner"></div>
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #10b981;">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                    <line x1="12" y1="22.08" x2="12" y2="12"></line>
                </svg>
            </div>
        </div>

        <h1 style="font-size: 28px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800; margin-bottom: 12px;">
            Loading Your Collection
        </h1>
        <div class="loading-dots" style="display: flex; gap: 8px;">
            <div class="dot" style="animation-delay: 0s;"></div>
            <div class="dot" style="animation-delay: 0.2s;"></div>
            <div class="dot" style="animation-delay: 0.4s;"></div>
        </div>
</div>
<!-- Login Screen -->
    <div id="loginScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #0f1729 0%, #1a2332 50%, #0f1729 100%); z-index: 10000; display: none; overflow-y: auto;">

        <!-- Background animated elements -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; pointer-events: none;">
            <div style="position: absolute; top: 10%; left: 15%; width: 300px; height: 300px; background: radial-gradient(circle, rgba(16, 185, 129, 0.15) 0%, transparent 70%); border-radius: 50%; animation: float1 8s ease-in-out infinite;"></div>
            <div style="position: absolute; bottom: 15%; right: 10%; width: 400px; height: 400px; background: radial-gradient(circle, rgba(6, 182, 212, 0.15) 0%, transparent 70%); border-radius: 50%; animation: float2 10s ease-in-out infinite;"></div>
        </div>

        <div style="position: relative; max-width: 1400px; margin: 0 auto; min-height: 100vh; display: flex; align-items: center; padding: 40px 20px;">

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; width: 100%; align-items: center;">

                <!-- Left Content -->
                <div style="padding: 40px 20px;">

                    <!-- Logo -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 60px; animation: slideInLeft 0.8s ease-out;">
                        <div style="position: relative; width: 50px; height: 50px;">
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 50px; height: 50px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); border-radius: 12px; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4); animation: logoPulse 2s ease-in-out infinite;">
                                <svg width="28" height="28" fill="white" viewBox="0 0 24 24" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                    <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                                </svg>
                            </div>
                        </div>
                        <div>
                            <h2 style="color: #fff; font-size: 24px; font-weight: 800; margin: 0; letter-spacing: 0.5px; background: linear-gradient(90deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">GEARNEST</h2>
                            <p style="color: rgba(255,255,255,0.5); font-size: 11px; margin: 0; letter-spacing: 2px; text-transform: uppercase;">Digital Locker</p>
                        </div>
                    </div>

                    <!-- Main Heading -->
                    <h1 style="color: #fff; font-size: 52px; line-height: 1.1; margin-bottom: 24px; font-weight: 800; animation: slideInLeft 0.8s ease-out 0.2s backwards;">
                        Track Your<br>
                        <span style="background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Tech & Gaming</span><br>
                        Legacy.
                    </h1>

                    <!-- Description -->
                    <p style="color: rgba(255,255,255,0.7); font-size: 16px; line-height: 1.6; margin-bottom: 48px; max-width: 500px; animation: slideInLeft 0.8s ease-out 0.4s backwards;">
                        A secure, private vault for your gadgets, game library, and digital purchases. Built for collectors, by collectors.
                    </p>

                    <!-- Category Buttons -->
                    <div style="display: flex; gap: 12px; flex-wrap: wrap; animation: slideInLeft 0.8s ease-out 0.6s backwards;">
                        <div style="display: flex; align-items: center; gap: 8px; padding: 12px 20px; background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(16, 185, 129, 0.2)'; this.style.borderColor='rgba(16, 185, 129, 0.5)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.borderColor='rgba(16, 185, 129, 0.3)'">
                            <svg width="18" height="18" fill="none" stroke="#10b981" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                            <span style="color: #10b981; font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Hardware</span>
                        </div>

                        <div style="display: flex; align-items: center; gap: 8px; padding: 12px 20px; background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 92, 246, 0.2)'; this.style.borderColor='rgba(139, 92, 246, 0.5)'" onmouseout="this.style.background='rgba(139, 92, 246, 0.1)'; this.style.borderColor='rgba(139, 92, 246, 0.3)'">
                            <svg width="18" height="18" fill="none" stroke="#8b5cf6" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z" />
                            </svg>
                            <span style="color: #8b5cf6; font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Gaming</span>
                        </div>

                        <div style="display: flex; align-items: center; gap: 8px; padding: 12px 20px; background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(6, 182, 212, 0.2)'; this.style.borderColor='rgba(6, 182, 212, 0.5)'" onmouseout="this.style.background='rgba(6, 182, 212, 0.1)'; this.style.borderColor='rgba(6, 182, 212, 0.3)'">
                            <svg width="18" height="18" fill="none" stroke="#06b6d4" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                            </svg>
                            <span style="color: #06b6d4; font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Digital</span>
                        </div>
                    </div>

                </div>

                <!-- Right Login Box -->
                <div style="animation: slideInRight 0.8s ease-out 0.4s backwards;">
                    <div style="background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(51, 65, 85, 0.8) 100%); backdrop-filter: blur(20px); padding: 50px 40px; border-radius: 24px; box-shadow: 0 24px 64px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.2); max-width: 450px; margin-left: auto;">

                        <!-- Shield Icon -->
                        <div style="width: 70px; height: 70px; margin: 0 auto 24px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(6, 182, 212, 0.2) 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(16, 185, 129, 0.3); animation: shieldPulse 2s ease-in-out infinite;">
                            <svg width="32" height="32" fill="none" stroke="#10b981" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>

                        <h2 style="color: #fff; font-size: 28px; font-weight: 800; margin-bottom: 10px; text-align: center; letter-spacing: -0.5px;">System Access</h2>
                        <p style="color: rgba(255,255,255,0.6); margin-bottom: 35px; text-align: center; font-size: 14px; font-weight: 500;">Initialize secure session to manage your assets</p>

                        <button id="googleSignInBtn" style="width: 100%; background: linear-gradient(90deg, #10b981 0%, #06b6d4 100%); color: white; border: none; padding: 18px 30px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px; transition: all 0.3s ease; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 32px rgba(16, 185, 129, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(16, 185, 129, 0.4)'">
                            <svg width="20" height="20" viewBox="0 0 20 20">
                                <path fill="white" d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z"/>
                                <path fill="white" d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z"/>
                                <path fill="white" d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z"/>
                                <path fill="white" d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z"/>
                            </svg>
                            Sign in with Google
                        </button>

                        <p style="color: rgba(255,255,255,0.4); font-size: 11px; text-align: center; margin-top: 24px; letter-spacing: 1px; text-transform: uppercase;">
                            Verified Security // Google Auth Protocol
                        </p>

                        <div id="loginError" style="color: #ef4444; margin-top: 20px; font-size: 14px; text-align: center; display: none;"></div>
                    </div>
                </div>

            </div>

        </div>

        <!-- Mobile Responsive Layout -->
</div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">

        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="logo" onclick="showSection('dashboard')" style="cursor: pointer;">
                <span class="logo-icon">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke-width="1.85" stroke-linecap="round" stroke-linejoin="round">
                        <defs>
                            <linearGradient id="logoNestGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#10b981"/>
                                <stop offset="100%" stop-color="#06b6d4"/>
                            </linearGradient>
                            <linearGradient id="logoOrbitGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#10b981" stop-opacity="0.9"/>
                                <stop offset="100%" stop-color="#06b6d4" stop-opacity="0.9"/>
                            </linearGradient>
                        </defs>
                        <circle class="logo-orbit-ring" cx="12" cy="12" r="10.2" stroke="url(#logoOrbitGrad)"/>
                        <g class="logo-orbit-node">
                            <circle class="logo-orbit-dot" cx="12" cy="1.95" r="1.05" fill="#06b6d4" stroke="none"/>
                        </g>
                        <path class="logo-core-hex" d="M12 2.8 19.2 7v10L12 21.2 4.8 17V7Z" stroke="url(#logoNestGrad)"/>
                        <path class="logo-core-n" d="M8.4 15.4V8.6l7.2 6.8V8.6" stroke="url(#logoNestGrad)"/>
                        <circle class="logo-side-node" cx="6.3" cy="12" r="1.05" fill="#10b981" stroke="none"/>
                        <circle class="logo-side-node" cx="17.7" cy="12" r="1.05" fill="#06b6d4" stroke="none"/>
                        <path class="logo-side-link" d="M7.35 12h1.05" stroke="url(#logoNestGrad)"/>
                        <path class="logo-side-link" d="M15.6 12h1.05" stroke="url(#logoNestGrad)"/>
                    </svg>
                </span>
                GearNest
            </div>
            <div class="desktop-nav-links" id="desktopNavLinks">
                <div class="desktop-nav-item active" data-section="dashboard" onclick="showSection('dashboard')">
                    <svg width="24" height="24" viewBox="0 0 100 100" style="display: inline-block; vertical-align: middle; margin-right: 6px; overflow: visible;">
                        <defs>
                            <linearGradient id="homeGradDesktopNew" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
                            </linearGradient>
                            <filter id="homeGlowDesktopNew">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Large pulsing circle -->
                        <circle cx="50" cy="50" r="35" 
                                fill="none" 
                                stroke="url(#homeGradDesktopNew)" 
                                stroke-width="3"
                                opacity="0.3"
                                filter="url(#homeGlowDesktopNew)"
                                class="home-icon-pulse-ring"/>
                        
                        <!-- Rotating square -->
                        <rect x="30" y="30" width="40" height="40" rx="5"
                              fill="none" 
                              stroke="url(#homeGradDesktopNew)" 
                              stroke-width="3"
                              opacity="0.8"
                              filter="url(#homeGlowDesktopNew)"
                              class="home-icon-outer-hex"/>
                        
                        <!-- House -->
                        <path d="M50 35 L35 47 L35 67 L47 67 L47 55 L53 55 L53 67 L65 67 L65 47 Z" 
                              fill="url(#homeGradDesktopNew)"
                              opacity="1"
                              filter="url(#homeGlowDesktopNew)"
                              class="home-icon-core"/>
                        
                        <!-- Orbiting dots -->
                        <circle cx="50" cy="50" r="5" fill="#10b981" opacity="1" filter="url(#homeGlowDesktopNew)" class="home-icon-orbit-dot1"/>
                        <circle cx="50" cy="50" r="5" fill="#06b6d4" opacity="1" filter="url(#homeGlowDesktopNew)" class="home-icon-orbit-dot2"/>
                        <circle cx="50" cy="50" r="5" fill="#10b981" opacity="1" filter="url(#homeGlowDesktopNew)" class="home-icon-orbit-dot3"/>
                    </svg>
                    Home
                </div>
                <div class="desktop-nav-item" data-section="gadgets" onclick="showSection('gadgets')">
                    <svg width="24" height="24" viewBox="0 0 100 100" style="display: inline-block; vertical-align: middle; margin-right: 6px; overflow: visible;">
                        <defs>
                            <linearGradient id="gadgetGradDesktop" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
                            </linearGradient>
                            <filter id="gadgetGlowDesktop">
                                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                            </filter>
                        </defs>
                        <rect x="25" y="15" width="50" height="70" rx="8" fill="none" stroke="url(#gadgetGradDesktop)" stroke-width="2.5" opacity="0.8" filter="url(#gadgetGlowDesktop)" class="gadget-icon-phone"/>
                        <rect x="30" y="22" width="40" height="50" rx="3" fill="none" stroke="url(#gadgetGradDesktop)" stroke-width="1.5" opacity="0.6" class="gadget-icon-screen"/>
                        <line x1="35" y1="35" x2="50" y2="35" stroke="#8b5cf6" stroke-width="2" class="gadget-icon-line1"/>
                        <line x1="50" y1="35" x2="50" y2="50" stroke="#ec4899" stroke-width="2" class="gadget-icon-line2"/>
                        <line x1="50" y1="50" x2="65" y2="50" stroke="#8b5cf6" stroke-width="2" class="gadget-icon-line3"/>
                        <circle cx="50" cy="35" r="3" fill="#8b5cf6" filter="url(#gadgetGlowDesktop)" class="gadget-icon-node1"/>
                        <circle cx="50" cy="50" r="3" fill="#ec4899" filter="url(#gadgetGlowDesktop)" class="gadget-icon-node2"/>
                        <circle cx="35" cy="35" r="2.5" fill="#8b5cf6" filter="url(#gadgetGlowDesktop)" class="gadget-icon-pulse"/>
                        <circle cx="50" cy="78" r="4" fill="none" stroke="url(#gadgetGradDesktop)" stroke-width="2" filter="url(#gadgetGlowDesktop)" class="gadget-icon-button"/>
                    </svg>
                    Gadgets
                </div>
                <div class="desktop-nav-item" data-section="games" onclick="showSection('games')">
                    <svg width="24" height="24" viewBox="0 0 100 100" style="display: inline-block; vertical-align: middle; margin-right: 6px; overflow: visible;">
                        <defs>
                            <linearGradient id="gameGradDesktop" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ef4444;stop-opacity:1" />
                            </linearGradient>
                            <filter id="gameGlowDesktop">
                                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                            </filter>
                        </defs>
                        <path d="M30 40 Q30 30 40 30 L60 30 Q70 30 70 40 L70 60 Q70 70 60 70 L40 70 Q30 70 30 60 Z" fill="none" stroke="url(#gameGradDesktop)" stroke-width="2.5" opacity="0.7" filter="url(#gameGlowDesktop)" class="game-icon-body"/>
                        <line x1="40" y1="50" x2="46" y2="50" stroke="#f59e0b" stroke-width="2.5" class="game-icon-dpad-h"/>
                        <line x1="43" y1="47" x2="43" y2="53" stroke="#f59e0b" stroke-width="2.5" class="game-icon-dpad-v"/>
                        <circle cx="60" cy="45" r="3" fill="#ef4444" filter="url(#gameGlowDesktop)" class="game-icon-btn1"/>
                        <circle cx="65" cy="50" r="3" fill="#f59e0b" filter="url(#gameGlowDesktop)" class="game-icon-btn2"/>
                        <circle cx="60" cy="55" r="3" fill="#ef4444" filter="url(#gameGlowDesktop)" class="game-icon-btn3"/>
                        <circle cx="55" cy="50" r="3" fill="#f59e0b" filter="url(#gameGlowDesktop)" class="game-icon-btn4"/>
                        <circle cx="50" cy="50" r="15" fill="none" stroke="#f59e0b" stroke-width="1.5" opacity="0.4" class="game-icon-wave1"/>
                        <circle cx="50" cy="50" r="20" fill="none" stroke="#ef4444" stroke-width="1.5" opacity="0.3" class="game-icon-wave2"/>
                    </svg>
                    Games
                </div>
                <div class="desktop-nav-item" data-section="digital" onclick="showSection('digital')">
                    <svg width="24" height="24" viewBox="0 0 100 100" style="display: inline-block; vertical-align: middle; margin-right: 6px; overflow: visible;">
                        <defs>
                            <linearGradient id="digitalGradDesktop" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                            </linearGradient>
                            <filter id="digitalGlowDesktop">
                                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                            </filter>
                        </defs>
                        <rect x="20" y="35" width="60" height="35" rx="5" fill="none" stroke="url(#digitalGradDesktop)" stroke-width="2.5" opacity="0.8" filter="url(#digitalGlowDesktop)" class="digital-icon-card"/>
                        <rect x="20" y="43" width="60" height="5" fill="url(#digitalGradDesktop)" opacity="0.6" class="digital-icon-stripe"/>
                        <rect x="28" y="52" width="12" height="10" rx="2" fill="none" stroke="#06b6d4" stroke-width="1.5" filter="url(#digitalGlowDesktop)" class="digital-icon-chip"/>
                        <line x1="48" y1="55" x2="52" y2="55" stroke="#3b82f6" stroke-width="2" opacity="0.5" class="digital-icon-num1"/>
                        <line x1="54" y1="55" x2="58" y2="55" stroke="#06b6d4" stroke-width="2" opacity="0.5" class="digital-icon-num2"/>
                        <line x1="60" y1="55" x2="64" y2="55" stroke="#3b82f6" stroke-width="2" opacity="0.5" class="digital-icon-num3"/>
                        <line x1="20" y1="35" x2="80" y2="35" stroke="#06b6d4" stroke-width="2" filter="url(#digitalGlowDesktop)" opacity="0.8" class="digital-icon-scan"/>
                        <circle cx="45" cy="30" r="1.5" fill="#06b6d4" filter="url(#digitalGlowDesktop)" class="digital-icon-particle1"/>
                        <circle cx="55" cy="32" r="1.5" fill="#3b82f6" filter="url(#digitalGlowDesktop)" class="digital-icon-particle2"/>
                        <circle cx="50" cy="75" r="1.5" fill="#06b6d4" filter="url(#digitalGlowDesktop)" class="digital-icon-particle3"/>
                    </svg>
                    Digital
                </div>
                <div class="desktop-nav-item" data-section="settings" onclick="showSection('settings')">
                    <svg width="24" height="24" viewBox="0 0 100 100" style="display: inline-block; vertical-align: middle; margin-right: 6px; overflow: visible;">
                        <defs>
                            <linearGradient id="settingsGradDesktop" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#a78bfa;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
                            </linearGradient>
                            <filter id="settingsGlowDesktop">
                                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                            </filter>
                        </defs>
                        <circle cx="50" cy="50" r="18" fill="none" stroke="url(#settingsGradDesktop)" stroke-width="2.5" filter="url(#settingsGlowDesktop)" class="settings-icon-gear1"/>
                        <circle cx="50" cy="32" r="3" fill="#a78bfa" filter="url(#settingsGlowDesktop)" class="settings-icon-tooth1"/>
                        <circle cx="68" cy="50" r="3" fill="#6366f1" filter="url(#settingsGlowDesktop)" class="settings-icon-tooth2"/>
                        <circle cx="50" cy="68" r="3" fill="#a78bfa" filter="url(#settingsGlowDesktop)" class="settings-icon-tooth3"/>
                        <circle cx="32" cy="50" r="3" fill="#6366f1" filter="url(#settingsGlowDesktop)" class="settings-icon-tooth4"/>
                        <circle cx="50" cy="50" r="8" fill="none" stroke="url(#settingsGradDesktop)" stroke-width="2" opacity="0.8" class="settings-icon-inner"/>
                        <circle cx="70" cy="30" r="10" fill="none" stroke="#a78bfa" stroke-width="2" opacity="0.6" filter="url(#settingsGlowDesktop)" class="settings-icon-gear2"/>
                        <circle cx="50" cy="50" r="2" fill="#a78bfa" filter="url(#settingsGlowDesktop)" class="settings-icon-particle1"/>
                        <circle cx="50" cy="50" r="2" fill="#6366f1" filter="url(#settingsGlowDesktop)" class="settings-icon-particle2"/>
                        <line x1="60" y1="40" x2="70" y2="30" stroke="#6366f1" stroke-width="1.5" opacity="0.5" class="settings-icon-connect"/>
                    </svg>
                    Settings
                </div>
                <div class="desktop-nav-item" data-section="admin" id="admin-nav" onclick="openAdminPanel()" style="display:none;color:#fbbf24;">
                    <svg width="18" height="18" fill="currentColor" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1" style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 3l1.5 4L9 5l1.5 4.5L12 7l1.5 2.5L15 5l2.5 2-1.5 4L19 3v14H5V3z" />
                    </svg>
                    Admin
                </div>
            </div>
            <div class="nav-actions">
                <div id="userInfo" style="display: none; position: relative;">
                    <div class="user-avatar" id="userAvatar" onclick="toggleProfileMenu()">U</div>
                    <div id="profileMenu" style="display:none; position:absolute; top:52px; right:0; min-width:220px; background:rgba(15,23,42,0.98); backdrop-filter:blur(20px); border:1px solid rgba(255,255,255,0.12); border-radius:16px; padding:8px; z-index:9999; box-shadow:0 16px 48px rgba(0,0,0,0.5);">
                        <div id="profileMenuName" style="padding:12px 14px 4px; font-weight:700; font-size:15px; color:#fff;"></div>
                        <div id="profileMenuEmail" style="padding:0 14px 12px; font-size:12px; color:rgba(255,255,255,0.5); border-bottom:1px solid rgba(255,255,255,0.08); margin-bottom:8px; word-break:break-all;"></div>
                        <div id="profileMenuAdmin" onclick="openAdminPanel(); toggleProfileMenu();" style="padding:10px 14px; cursor:pointer; border-radius:10px; color:#fbbf24; font-size:14px; display:none; align-items:center; gap:10px; border:1px solid rgba(251, 191, 36, 0.2); margin-bottom:8px; font-weight:600;" onmouseover="this.style.background='rgba(251, 191, 36, 0.12)'; this.style.borderColor='rgba(251, 191, 36, 0.45)'" onmouseout="this.style.background='transparent'; this.style.borderColor='rgba(251, 191, 36, 0.2)'"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#fbbf24" stroke-width="2" style="flex-shrink:0;"><path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></svg> Admin Panel</div>
                        <!-- Encryption Toggle -->
                        <div id="profileMenuEncryption" onclick="profileMenuEncryptionToggle(); toggleProfileMenu();" style="padding:10px 14px; cursor:pointer; border-radius:10px; color:#10b981; font-size:14px; display:flex; align-items:center; gap:10px; margin-bottom:4px;" onmouseover="this.style.background='rgba(255,255,255,0.06)'" onmouseout="this.style.background='transparent'">
                            <svg id="profileMenuEncryptionIcon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="flex-shrink:0;"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>
                            <span id="profileMenuEncryptionLabel">Enable Encryption</span>
                        </div>
                        <div style="border-top:1px solid rgba(255,255,255,0.08); margin:8px 0;"></div>
                        <div onclick="document.getElementById('signOutBtn').click(); toggleProfileMenu();" style="padding:10px 14px; cursor:pointer; border-radius:10px; color:#ef4444; font-size:14px; display:flex; align-items:center; gap:10px;" onmouseover="this.style.background='rgba(239,68,68,0.1)'" onmouseout="this.style.background='transparent'"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="flex-shrink:0;"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg> Sign Out</div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Container -->
        <div class="container">

            <!-- ==================== DASHBOARD ==================== -->
            <div id="dashboard" class="section active">
                <h1 style="font-size:42px;font-weight:800;margin-bottom:4px;">Dashboard</h1>
                <p style="color:var(--text-secondary);margin-bottom:28px;">Welcome back!</p>

                <div style="margin-bottom:24px;">
                    <h3 style="font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;margin-bottom:12px;background:linear-gradient(135deg, #10b981 0%, #06b6d4 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:flex;align-items:center;gap:6px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="7.2" y="2.5" width="9.6" height="19" rx="2.2"/><path d="M10 5.5h4"/><circle cx="12" cy="18.1" r="0.8" fill="#10b981" stroke="none"/><path d="M3.3 9.8h2.8"/><path d="M3.3 14.2h2.8"/><path d="M17.9 9.8h2.8"/><path d="M17.9 14.2h2.8"/></svg> Gadgets</h3>
                    <div class="stats-grid">
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Total</div><div class="stat-value" id="dash-total-gadgets">0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Current Value</div><div class="stat-value" style="font-size:22px;" id="dash-gadgets-value">₹0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Sold</div><div class="stat-value" id="dash-gadgets-sold">0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Profit/Loss</div><div class="stat-value" style="font-size:22px;" id="dash-gadgets-profit">₹0</div></div></div>
                    </div>
                </div>

                <div style="margin-bottom:24px;">
                    <h3 style="font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;margin-bottom:12px;background:linear-gradient(135deg, #10b981 0%, #06b6d4 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:flex;align-items:center;gap:6px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 9.5h11a4.5 4.5 0 0 1 4.33 5.72l-.48 1.63A2.25 2.25 0 0 1 19.2 18.5h-1.08a2.5 2.5 0 0 1-2.17-1.26l-.74-1.28h-6.42l-.74 1.28A2.5 2.5 0 0 1 5.88 18.5H4.8a2.25 2.25 0 0 1-2.15-1.65l-.48-1.63A4.5 4.5 0 0 1 6.5 9.5Z"/><path d="M9 12.15v2.7"/><path d="M7.65 13.5h2.7"/><circle cx="15.8" cy="12.7" r="0.95" fill="#10b981" stroke="none"/><circle cx="18.1" cy="14.3" r="0.95" fill="#10b981" stroke="none"/></svg> Games</h3>
                    <div class="stats-grid">
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Total</div><div class="stat-value" id="dash-total-games">0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Current Value</div><div class="stat-value" style="font-size:22px;" id="dash-games-value">₹0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Sold</div><div class="stat-value" id="dash-games-sold">0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Profit/Loss</div><div class="stat-value" style="font-size:22px;" id="dash-games-profit-stat">₹0</div></div></div>
                    </div>
                </div>

                <div style="margin-bottom:24px;">
                    <h3 style="font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;margin-bottom:12px;background:linear-gradient(135deg, #10b981 0%, #06b6d4 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:flex;align-items:center;gap:6px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2.5" y="4" width="19" height="16" rx="2.5"/><path d="M2.5 8.5h19"/><circle cx="6.1" cy="6.2" r="0.7" fill="#10b981" stroke="none"/><circle cx="9.1" cy="6.2" r="0.7" fill="#10b981" stroke="none"/><path d="m8.4 15.2 2.5 2.5 4.8-5"/></svg> Digital</h3>
                    <div class="stats-grid">
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Total Purchases</div><div class="stat-value" id="dash-total-digital">0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Total Spent</div><div class="stat-value" style="font-size:22px;" id="dash-digital-spent">₹0</div></div></div>
                        <div class="stat-card"><div class="stat-content"><div class="stat-label">Total Profit/Loss</div><div class="stat-value" style="font-size:22px;" id="dash-total-profit">₹0</div></div></div>
                    </div>
                </div>

                <div>
                    <h3 style="font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;margin-bottom:12px;background:linear-gradient(135deg, #10b981 0%, #06b6d4 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Recent Activity</h3>
                    <div id="recent-items" class="items-grid"></div>
                </div>
            </div>

            <!-- ==================== GADGETS ==================== -->
            <div id="gadgets" class="section">
                <h1 style="font-size:42px;font-weight:800;margin-bottom:28px;display:flex;align-items:center;gap:12px;"><span style="display:inline-flex;background:linear-gradient(135deg,#10b981 0%,#06b6d4 100%);border-radius:12px;padding:8px;"><svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg></span> Gadgets</h1>
                <button class="add-toggle-btn" data-toggle="gadgets-add-wrapper" onclick="toggleAddForm('gadgets-add-wrapper')">
                    <span class="btn-chevron">+</span> Add New Gadget
                </button>
                <div id="gadgets-add-wrapper" class="add-form-collapsible">
                <div class="add-form">
                    <h3 style="margin-bottom:20px;">Add / Edit Gadget</h3>
                    <form id="gadget-form">
                        <div class="form-grid">
                            <div class="input-group"><label>Name</label><input type="text" id="g-name" placeholder="e.g. iPhone 15 Pro" required></div>
                            <div class="input-group"><label>Category</label><select id="g-category"></select></div>
                            <div class="input-group"><label>Buy Price (₹)</label><input type="number" id="g-price" placeholder="0" required></div>
                            <div class="input-group"><label>Purchase Date</label><input type="date" id="g-date" required></div>
                            <div class="input-group"><label>Sell Price (₹) <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label><input type="number" id="g-sell-price" placeholder="Leave blank if owned"></div>
                            <div class="input-group"><label>Sell Date <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label><input type="date" id="g-sell-date"></div>

                            <!-- Condition Field -->
                            <div class="input-group">
                                <label>Condition <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                                <select id="g-condition">
                                    <option value="">Select condition</option>
                                </select>
                            </div>

                            <!-- Clickable Image Icon -->
                            <div class="input-group">
                                <label>Product Image <span style="color:var(--text-muted);font-size:11px;">(click to add)</span></label>
                                <div onclick="openImagePicker('gadget')" style="cursor: pointer; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; display: flex; align-items: center; gap: 12px; min-height: 48px; transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.borderColor='rgba(16, 185, 129, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                                    <div id="g-image-preview-container" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#10b981;flex-shrink:0;"><rect x="7.2" y="2.5" width="9.6" height="19" rx="2.2"/><path d="M10 5.5h4"/><circle cx="12" cy="18.1" r="0.8" fill="currentColor" stroke="none"/><path d="M3.3 9.8h2.8"/><path d="M3.3 14.2h2.8"/><path d="M17.9 9.8h2.8"/><path d="M17.9 14.2h2.8"/></svg>
                                        <div style="font-size: 13px; color: var(--text-muted);">Click to add image</div>
                                    </div>
                                    <input type="hidden" id="g-final-image-url" value="">
                                </div>
                            </div>
                        </div>

                        <div class="input-group" style="margin-top:8px;"><label>Notes</label><textarea id="g-notes" rows="2" placeholder="Any notes..."></textarea></div>
                        <button type="submit" class="btn">Add to Collection</button>
                    </form>
                </div>
                </div><!-- /gadgets-add-wrapper -->
                <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;">
                    <button class="filter-chip active" onclick="filterGadgets(event,'all')">All</button>
                    <button class="filter-chip" onclick="filterGadgets(event,'owned')">Owned</button>
                    <button class="filter-chip" onclick="filterGadgets(event,'sold')">Sold</button>
                </div>
                <div id="gadgets-list" class="items-grid"></div>
            </div>

            <!-- ==================== GAMES ==================== -->
            <div id="games" class="section">
                <h1 style="font-size:42px;font-weight:800;margin-bottom:28px;display:flex;align-items:center;gap:12px;"><span style="display:inline-flex;background:linear-gradient(135deg,#10b981 0%,#06b6d4 100%);border-radius:12px;padding:8px;"><svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><line x1="6" y1="12" x2="10" y2="12"/><line x1="8" y1="10" x2="8" y2="14"/><line x1="15" y1="11" x2="15.01" y2="11" stroke-width="3"/><line x1="18" y1="13" x2="18.01" y2="13" stroke-width="3"/><path d="M4 8h16c.3 0 .6.1.8.3.2.2.3.5.2.8l-2 8c-.1.5-.6.9-1.2.9H6.2c-.6 0-1.1-.4-1.2-.9l-2-8c-.1-.3 0-.6.2-.8C3.4 8.1 3.7 8 4 8z"/></svg></span> Games</h1>
                <button class="add-toggle-btn" data-toggle="games-add-wrapper" onclick="toggleAddForm('games-add-wrapper')">
                    <span class="btn-chevron">+</span> Add New Game
                </button>
                <div id="games-add-wrapper" class="add-form-collapsible">
                <div class="add-form">
                    <h3 style="margin-bottom:20px;">Add / Edit Game</h3>
                    <form id="game-form">
                        <div class="form-grid">
                            <div class="input-group" style="grid-column:1 / -1;">
                                <label>Quick Fill From Catalog <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                                <div id="gm-catalog-search-wrap" class="game-catalog-search-wrap">
                                    <div style="display:flex;gap:8px;align-items:center;">
                                        <input type="text" id="gm-catalog-search" placeholder="Search games (start typing title)" style="flex:1;" oninput="updateGameCatalogSearchHint()" onfocus="openGameCatalogResults()" onclick="openGameCatalogResults()" onkeydown="handleGameCatalogSearchKey(event)" autocomplete="off">
                                        <button type="button" class="btn" style="white-space:nowrap;padding:10px 14px;" onclick="applyGameCatalogSearchSelection()">Use Match</button>
                                        <button type="button" class="btn btn-secondary" style="white-space:nowrap;padding:10px 14px;" onclick="resetGameCatalogSelection()">Reset</button>
                                    </div>
                                    <div id="gm-catalog-results" class="custom-select-options game-catalog-results"></div>
                                </div>
                                <div id="gm-catalog-match-hint" class="game-catalog-hint">Admin can import the game metadata catalog in Admin panel to enable quick auto-fill.</div>
                            </div>
                            <div class="input-group"><label>Title</label><input type="text" id="gm-title" placeholder="e.g. Elden Ring" required oninput="updateGameCatalogSearchHint()"></div>
                            <div class="input-group"><label>Platform</label>
                                <div id="platform-select-wrapper" style="position:relative;">
                                    <select id="gm-platform"></select>
                                </div>
                            </div>
                            <div class="input-group"><label>Genre</label><select id="gm-genre"></select></div>
                            <div class="input-group"><label>Metacritic Score <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label><input type="text" id="gm-metacritic-score" placeholder="e.g. 96"></div>
                            <div class="input-group"><label>Metacritic URL <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label><input type="url" id="gm-metacritic-url" placeholder="https://www.metacritic.com/..." autocapitalize="off" spellcheck="false"></div>
                            <div class="input-group"><label>Condition</label><select id="gm-condition"></select></div>
                            <div class="input-group"><label>Buy Price (₹)</label><input type="number" id="gm-buy-price" placeholder="0" required></div>
                            <div class="input-group"><label>Purchase Date</label><input type="date" id="gm-buy-date" required></div>
                            <div class="input-group"><label>Sell Price (₹) <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label><input type="number" id="gm-sell-price" placeholder="Leave blank if owned"></div>
                            <div class="input-group"><label>Sell Date <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label><input type="date" id="gm-sell-date"></div>

                            <!-- Clickable Image Icon for Games -->
                            <div class="input-group">
                                <label>Game Cover <span style="color:var(--text-muted);font-size:11px;">(click to add)</span></label>
                                <div onclick="openImagePicker('game')" style="cursor: pointer; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; display: flex; align-items: center; gap: 12px; min-height: 48px; transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.borderColor='rgba(16, 185, 129, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                                    <div id="gm-image-preview-container" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#10b981;flex-shrink:0;"><path d="M6.5 9.5h11a4.5 4.5 0 0 1 4.33 5.72l-.48 1.63A2.25 2.25 0 0 1 19.2 18.5h-1.08a2.5 2.5 0 0 1-2.17-1.26l-.74-1.28h-6.42l-.74 1.28A2.5 2.5 0 0 1 5.88 18.5H4.8a2.25 2.25 0 0 1-2.15-1.65l-.48-1.63A4.5 4.5 0 0 1 6.5 9.5Z"/><path d="M9 12.15v2.7"/><path d="M7.65 13.5h2.7"/><circle cx="15.8" cy="12.7" r="0.95" fill="currentColor" stroke="none"/><circle cx="18.1" cy="14.3" r="0.95" fill="currentColor" stroke="none"/></svg>
                                        <div style="font-size: 13px; color: var(--text-muted);">Click to add cover</div>
                                    </div>
                                    <input type="hidden" id="gm-final-image-url" value="">
                                </div>
                            </div>
                        </div>
                        <div class="input-group" style="margin-top:8px;"><label>Notes</label><textarea id="gm-notes" rows="2" placeholder="Any notes..."></textarea></div>
                        <button type="submit" class="btn">Add to Collection</button>
                    </form>
                </div>
                </div><!-- /games-add-wrapper -->
                <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;">
                    <button class="filter-chip active" onclick="filterGames(event,'all')">All</button>
                    <button class="filter-chip" onclick="filterGames(event,'owned')">Owned</button>
                    <button class="filter-chip" onclick="filterGames(event,'sold')">Sold</button>
                </div>
                <div id="games-list" class="items-grid"></div>
            </div>

            <!-- ==================== DIGITAL ==================== -->
            <div id="digital" class="section">
                <h1 style="font-size:42px;font-weight:800;margin-bottom:28px;display:flex;align-items:center;gap:12px;"><span style="display:inline-flex;background:linear-gradient(135deg,#10b981 0%,#06b6d4 100%);border-radius:12px;padding:8px;"><svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg></span> Digital</h1>
                <button class="add-toggle-btn" data-toggle="digital-add-wrapper" onclick="toggleAddForm('digital-add-wrapper')">
                    <span class="btn-chevron">+</span> Add New Purchase
                </button>
                <div id="digital-add-wrapper" class="add-form-collapsible">
                <div class="add-form">
                    <h3 style="margin-bottom:20px;">Add Digital Purchase</h3>
                    <form id="digital-form">
                        <div class="form-grid">
                            <div class="input-group"><label>Name</label><input type="text" id="d-name" placeholder="e.g. Netflix" required></div>
                            <div class="input-group"><label>Type</label><select id="d-type"></select></div>
                            <div class="input-group"><label>Amount (₹)</label><input type="number" id="d-amount" placeholder="0" required></div>
                            <div class="input-group"><label>Purchase Date</label><input type="date" id="d-date" required></div>
                            <div class="input-group">
                                <label>Validity Period</label>
                                <select id="d-validity" onchange="toggleCustomValidity()">
                                    <option value="">No expiry</option>
                                    <option value="1">1 Month</option>
                                    <option value="3">3 Months</option>
                                    <option value="6">6 Months</option>
                                    <option value="12">1 Year</option>
                                    <option value="custom">Custom</option>
                                </select>
                            </div>
                            <div class="input-group" id="custom-validity-group" style="display: none;">
                                <label>Custom Duration (months)</label>
                                <input type="number" id="d-custom-months" placeholder="e.g. 18" min="1">
                            </div>
                            <!-- Clickable Image Icon for Digital -->
                            <div class="input-group">
                                <label>Service Icon <span style="color:var(--text-muted);font-size:11px;">(click to add)</span></label>
                                <div onclick="openImagePicker('digital')" style="cursor: pointer; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; display: flex; align-items: center; gap: 12px; min-height: 48px; transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.borderColor='rgba(16, 185, 129, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                                    <div id="d-image-preview-container" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#10b981;flex-shrink:0;"><rect x="2.5" y="4" width="19" height="16" rx="2.5"/><path d="M2.5 8.5h19"/><circle cx="6.1" cy="6.2" r="0.7" fill="currentColor" stroke="none"/><circle cx="9.1" cy="6.2" r="0.7" fill="currentColor" stroke="none"/><path d="m8.4 15.2 2.5 2.5 4.8-5"/></svg>
                                        <div style="font-size: 13px; color: var(--text-muted);">Click to add icon</div>
                                    </div>
                                    <input type="hidden" id="d-final-image-url" value="">
                                </div>
                            </div>
                        </div>
                        <div class="input-group" style="margin-top:8px;"><label>Notes</label><textarea id="d-notes" rows="2" placeholder="Any notes..."></textarea></div>
                        <button type="submit" class="btn">Add Purchase</button>
                    </form>
                </div>
                </div><!-- /digital-add-wrapper -->
                <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;">
                    <button class="filter-chip active" onclick="filterDigital(event,'all')">All</button>
                    <button class="filter-chip" onclick="filterDigital(event,'active')">Active</button>
                    <button class="filter-chip" onclick="filterDigital(event,'soon')">Soon to Expire</button>
                    <button class="filter-chip" onclick="filterDigital(event,'expired')">Expired</button>
                </div>
                <div id="digital-list" class="items-grid"></div>
            </div>

            <!-- ==================== SETTINGS ==================== -->
            <div id="settings" class="section">
                <h1 style="font-size:42px;font-weight:800;margin-bottom:28px;display:flex;align-items:center;gap:12px;"><span style="display:inline-flex;background:linear-gradient(135deg,#10b981 0%,#06b6d4 100%);border-radius:12px;padding:8px;"><svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span> Settings</h1>

                <!-- Hidden sign out button — kept for profile menu click handler & event listener -->
                <button id="signOutBtn" style="display:none;"></button>

                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px;margin-bottom:24px;">
                    <div class="add-form" style="margin-bottom:0;">
                        <h3 style="margin-bottom:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>Data Encryption</h3>

                        <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:10px;">
                            <div style="font-size:12px;color:var(--text-muted);">Signed in: <strong id="userEmail" style="color:var(--text-secondary);font-weight:500;"></strong></div>
                            <!-- Encryption Button - Show when ENABLED -->
                            <button id="encryption-enabled-controls" onclick="if(confirm('Are you sure you want to disable encryption?\\n\\nYour data will no longer be encrypted.')) { disableEncryption(); }" class="btn" style="padding:8px 12px;background:rgba(239,68,68,0.2);color:#ef4444;border:1px solid rgba(239,68,68,0.3);display:none;">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px;"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>Disable
                            </button>
                        </div>

                        <!-- Encryption Status Display -->
                        <div id="encryption-status" style="padding:10px 12px;border-radius:10px;border:1px solid rgba(148,163,184,0.2);background:rgba(148,163,184,0.1);display:flex;align-items:center;gap:8px;flex-wrap:wrap;">
                            <span id="encryption-status-icon" style="display:inline-flex;align-items:center;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg></span>
                            <span id="encryption-status-text" style="font-weight:600;font-size:12px;">Encryption Off</span>
                            <span id="encryption-status-subtitle" style="font-size:11px;color:var(--text-muted);">Not encrypted</span>
                        </div>
                    </div>

                    <div class="add-form" style="margin-bottom:0;">
                        <h3 style="margin-bottom:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="5" y="2" width="14" height="20" rx="2"/><path d="M8 6h8"/><path d="M8 10h8"/></svg>Install App</h3>
                        <div style="padding:10px 12px;border-radius:10px;border:1px solid rgba(148,163,184,0.2);background:rgba(148,163,184,0.08);display:grid;gap:8px;">
                            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;">
                                <div id="pwa-install-status" style="font-size:12px;color:var(--text-secondary);">Checking support...</div>
                                <button id="pwa-install-btn" class="pwa-install-btn" type="button" style="margin:0;">Install</button>
                            </div>
                            <details style="font-size:12px;color:var(--text-muted);line-height:1.5;">
                                <summary style="cursor:pointer;color:var(--text-secondary);font-size:12px;">How to install</summary>
                                <div style="margin-top:6px;">iPhone/iPad: Safari -> Share -> Add to Home Screen. Android/Desktop: use Install button or browser install menu.</div>
                            </details>
                        </div>
                    </div>

                    <div class="add-form" style="margin-bottom:0;">
                        <h3 style="margin-bottom:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/></svg>Card Image Display</h3>
                        <div class="image-fit-mode-row" style="margin-bottom:8px;">
                            <button type="button" id="image-fit-cover-btn" class="image-fit-mode-btn active">Cover</button>
                            <button type="button" id="image-fit-contain-btn" class="image-fit-mode-btn">Contain</button>
                        </div>
                        <div id="image-fit-mode-status" style="font-size:12px;color:var(--text-secondary);line-height:1.45;">Cover mode fills the frame and center-crops edges.</div>
                    </div>
                </div>

                <div class="add-form" style="margin-bottom:24px;">
                    <h3 style="margin-bottom:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><path d="M12 3v12"/><path d="m8 11 4 4 4-4"/><path d="M8 21h8"/><path d="M16 7h4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7h4"/></svg>Data Import / Export</h3>
                    <p style="font-size:12px;color:var(--text-muted);margin-bottom:12px;">Download templates, import your CSV files, or export your current data.</p>
                    <div class="settings-data-tools-grid">
                        <div class="settings-data-tool-card">
                            <div class="settings-data-tool-title">Gadgets</div>
                            <div class="settings-data-tool-actions">
                                <button type="button" class="settings-data-tool-btn" onclick="downloadGadgetTemplate()">Download Template</button>
                                <button type="button" class="settings-data-tool-btn" onclick="triggerSettingsImport('settings-import-gadgets')">Import CSV</button>
                                <button type="button" class="settings-data-tool-btn" onclick="exportGadgetsCSV()">Export CSV</button>
                            </div>
                        </div>
                        <div class="settings-data-tool-card">
                            <div class="settings-data-tool-title">Games</div>
                            <div class="settings-data-tool-actions">
                                <button type="button" class="settings-data-tool-btn" onclick="downloadGameTemplate()">Download Template</button>
                                <button type="button" class="settings-data-tool-btn" onclick="triggerSettingsImport('settings-import-games')">Import CSV</button>
                                <button type="button" class="settings-data-tool-btn" onclick="exportGamesCSV()">Export CSV</button>
                            </div>
                        </div>
                        <div class="settings-data-tool-card">
                            <div class="settings-data-tool-title">Digital Purchases</div>
                            <div class="settings-data-tool-actions">
                                <button type="button" class="settings-data-tool-btn" onclick="downloadDigitalTemplate()">Download Template</button>
                                <button type="button" class="settings-data-tool-btn" onclick="triggerSettingsImport('settings-import-digital')">Import CSV</button>
                                <button type="button" class="settings-data-tool-btn" onclick="exportDigitalCSV()">Export CSV</button>
                            </div>
                        </div>
                    </div>
                    <input type="file" id="settings-import-gadgets" accept=".csv,text/csv,text/plain" style="display:none;" onchange="importGadgetsCSV(event)">
                    <input type="file" id="settings-import-games" accept=".csv,text/csv,text/plain" style="display:none;" onchange="importGamesCSV(event)">
                    <input type="file" id="settings-import-digital" accept=".csv,text/csv,text/plain" style="display:none;" onchange="importDigitalCSV(event)">
                </div>

                <div class="add-form" style="margin-bottom:24px;">
                    <h3 style="margin-bottom:16px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="5" y="2" width="14" height="20" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>Gadget Categories</h3>
                    <div style="display:flex;gap:8px;margin-bottom:12px;">
                        <input type="text" id="new-gadget-category" placeholder="New category" style="flex:1;padding:10px 12px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:8px;color:#fff;font-family:inherit;">
                        <button class="btn" onclick="addGadgetCategory()">Add</button>
                    </div>
                    <div id="gadget-categories-list" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));gap:10px;"></div>
                </div>

                <div class="add-form" style="margin-bottom:24px;">
                    <h3 style="margin-bottom:16px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><line x1="6" y1="12" x2="10" y2="12"/><line x1="8" y1="10" x2="8" y2="14"/><line x1="15" y1="11" x2="15.01" y2="11" stroke-width="3"/><line x1="18" y1="13" x2="18.01" y2="13" stroke-width="3"/><path d="M4 8h16c.3 0 .6.1.8.3.2.2.3.5.2.8l-2 8c-.1.5-.6.9-1.2.9H6.2c-.6 0-1.1-.4-1.2-.9l-2-8c-.1-.3 0-.6.2-.8C3.4 8.1 3.7 8 4 8z"/></svg>Game Platforms</h3>
                    <div style="display:flex;gap:8px;margin-bottom:12px;">
                        <input type="text" id="new-game-platform" placeholder="New platform" style="flex:1;padding:10px 12px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:8px;color:#fff;font-family:inherit;">
                        <button class="btn" onclick="addGamePlatform()">Add</button>
                    </div>
                    <div id="game-platforms-list" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));gap:10px;"></div>
                </div>

                <div class="add-form" style="margin-bottom:24px;">
                    <h3 style="margin-bottom:16px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><path d="M20.59 13.41 11 3.83A2 2 0 0 0 9.59 3H4a1 1 0 0 0-1 1v5.59a2 2 0 0 0 .59 1.41L13.17 20.6a2 2 0 0 0 2.83 0l4.59-4.59a2 2 0 0 0 0-2.83Z"/><circle cx="7.5" cy="7.5" r="1.5"/></svg>Game Genres</h3>
                    <div style="display:flex;gap:8px;margin-bottom:12px;">
                        <input type="text" id="new-game-genre" placeholder="New genre" style="flex:1;padding:10px 12px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:8px;color:#fff;font-family:inherit;">
                        <button class="btn" onclick="addGameGenre()">Add</button>
                    </div>
                    <div id="game-genres-list" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));gap:10px;"></div>
                </div>

                <div class="add-form" style="margin-bottom:24px;">
                    <h3 style="margin-bottom:16px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>Digital Types</h3>
                    <div style="display:flex;gap:8px;margin-bottom:12px;">
                        <input type="text" id="new-digital-type" placeholder="New type" style="flex:1;padding:10px 12px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:8px;color:#fff;font-family:inherit;">
                        <button class="btn" onclick="addDigitalType()">Add</button>
                    </div>
                    <div id="digital-types-list" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));gap:10px;"></div>
                </div>

                <div class="add-form" style="margin-bottom:24px;">
                    <h3 style="margin-bottom:16px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="9" cy="9" r="1.5"/><path d="m21 15-5-5L5 21"/></svg>Custom Platform Icons</h3>
                    <div class="form-grid">
                        <div class="input-group"><label>Platform</label>
                            <div id="icon-platform-select-wrapper">
                                <select id="icon-platform-name"><option value="">Select a platform...</option></select>
                            </div>
                        </div>
                        <div class="input-group"><label>Upload Image</label><input type="file" id="icon-upload" accept="image/*" style="padding:8px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:8px;color:#fff;width:100%;"></div>
                        <div class="input-group"><label>Or paste URL</label><input type="url" id="icon-url" placeholder="https://..." style="padding:10px 12px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:8px;color:#fff;font-family:inherit;width:100%;"></div>
                    </div>
                    <div id="icon-preview" style="display:none;margin-bottom:12px;align-items:center;gap:12px;">
                        <img id="icon-preview-img" style="width:48px;height:48px;object-fit:contain;border-radius:8px;background:rgba(255,255,255,0.9);padding:4px;" alt="Preview">
                        <span style="color:var(--text-secondary);font-size:14px;">Preview</span>
                    </div>
                    <button class="btn" onclick="saveCustomIcon()" style="margin-bottom:16px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:5px;"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>Save Icon</button>
                    <div id="icons-grid"></div>
                </div>
            </div>

            <!-- ==================== ADMIN ==================== -->
            <div id="admin" class="section">
                <h1 style="font-size:42px;font-weight:800;margin-bottom:28px;display:flex;align-items:center;gap:12px;"><span style="display:inline-flex;background:linear-gradient(135deg,#fbbf24 0%,#f59e0b 100%);border-radius:12px;padding:8px;"><svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></svg></span> Admin Panel</h1>
                <div class="add-form" style="margin-bottom:24px;">
                    <h3 style="margin-bottom:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><path d="M12 3v12"/><path d="m8 11 4 4 4-4"/><path d="M8 21h8"/><path d="M16 7h4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7h4"/></svg>Game Metadata Catalog Tools</h3>
                    <p style="font-size:12px;color:var(--text-muted);margin-bottom:12px;">Admin-only controls for importing, exporting, and managing game metadata.</p>
                    <div class="settings-data-tools-grid">
                        <div class="settings-data-tool-card">
                            <div class="settings-data-tool-title">Game Metadata Catalog</div>
                            <div class="settings-data-tool-actions">
                                <button type="button" class="settings-data-tool-btn" onclick="downloadGameMetadataTemplate()">Download Template</button>
                                <button type="button" class="settings-data-tool-btn" onclick="triggerSettingsImport('settings-import-game-metadata')">Import CSV</button>
                                <button type="button" class="settings-data-tool-btn" onclick="exportGameMetadataCatalogCSV()">Export CSV</button>
                            </div>
                        </div>
                        <div class="settings-data-tool-card">
                            <div class="settings-data-tool-title">Cloudflare Phase 2 Migration</div>
                            <div class="settings-data-tool-actions">
                                <button type="button" class="settings-data-tool-btn" onclick="downloadCloudflareMigrationBackup()">Download Backup JSON</button>
                                <button type="button" class="settings-data-tool-btn" onclick="uploadCurrentDataToCloudflare()">Upload Current Data</button>
                                <button type="button" class="settings-data-tool-btn" onclick="triggerSettingsImport('settings-import-cloudflare-backup')">Upload Backup File</button>
                            </div>
                        </div>
                    </div>
                    <input type="file" id="settings-import-game-metadata" accept=".csv,text/csv,text/plain" style="display:none;" onchange="importGameMetadataCatalogCSV(event)">
                    <input type="file" id="settings-import-cloudflare-backup" accept=".json,application/json,text/plain" style="display:none;" onchange="uploadCloudflareBackupFile(event)">
                </div>
                <details class="settings-gmc-panel">
                    <summary>
                        <span><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4"/><path d="M18.5 2.5a2.1 2.1 0 0 1 3 3L12 15l-4 1 1-4Z"/></svg>Manage Game Metadata Catalog</span>
                    </summary>
                    <div class="settings-gmc-panel-body">
                        <div class="form-grid">
                            <div class="input-group"><label>Title</label><input type="text" id="settings-gmc-title" placeholder="e.g. Elden Ring"></div>
                            <div class="input-group"><label>Platform</label><input type="text" id="settings-gmc-platform" placeholder="e.g. PlayStation 5"></div>
                            <div class="input-group"><label>Genre</label><input type="text" id="settings-gmc-genre" placeholder="e.g. RPG"></div>
                            <div class="input-group"><label>Metacritic Score</label><input type="text" id="settings-gmc-score" placeholder="e.g. 96"></div>
                            <div class="input-group"><label>Metacritic URL</label><input type="url" id="settings-gmc-url" placeholder="https://www.metacritic.com/..."></div>
                            <div class="input-group"><label>Cover Image URL</label><input type="url" id="settings-gmc-image" placeholder="https://example.com/cover.jpg"></div>
                        </div>
                        <div style="display:flex;gap:8px;flex-wrap:wrap;">
                            <button type="button" id="settings-gmc-save-btn" class="btn" onclick="saveGameMetadataCatalogEntry()">Add Entry</button>
                            <button type="button" class="btn" style="background:rgba(148,163,184,0.15);border:1px solid rgba(148,163,184,0.35);" onclick="clearGameMetadataCatalogEditor()">Clear</button>
                        </div>
                        <div id="settings-gmc-editor-status" style="font-size:12px;color:var(--text-muted);"></div>
                        <div style="display:flex;gap:8px;">
                            <input type="text" id="settings-game-metadata-search" placeholder="Search catalog entries by title/platform/genre..." style="flex:1;padding:10px 12px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:8px;color:#fff;font-family:inherit;" oninput="renderGameMetadataCatalogManager()">
                        </div>
                        <div id="settings-game-metadata-list" class="settings-gmc-grid"></div>
                    </div>
                </details>
            </div>

        </div>

        <!-- Bottom Navigation (Mobile) -->
        <div class="bottom-nav">
            <div class="bottom-nav-items">
                <div class="bottom-nav-item active" data-section="dashboard">
                    <div class="bottom-nav-icon">
                        <svg width="32" height="32" viewBox="0 0 100 100" style="overflow: visible;">
                            <defs>
                                <linearGradient id="homeGradMobile" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
                                </linearGradient>
                                <filter id="homeGlowMobile">
                                    <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>
                            
                            <!-- Large pulsing circle background -->
                            <circle cx="50" cy="50" r="35" 
                                    fill="none" 
                                    stroke="url(#homeGradMobile)" 
                                    stroke-width="3"
                                    opacity="0.3"
                                    filter="url(#homeGlowMobile)"
                                    class="home-icon-pulse-ring"/>
                            
                            <!-- Rotating square frame -->
                            <rect x="30" y="30" width="40" height="40" rx="5"
                                  fill="none" 
                                  stroke="url(#homeGradMobile)" 
                                  stroke-width="3"
                                  opacity="0.8"
                                  filter="url(#homeGlowMobile)"
                                  class="home-icon-outer-hex"/>
                            
                            <!-- House shape - larger and brighter -->
                            <path d="M50 35 L35 47 L35 67 L47 67 L47 55 L53 55 L53 67 L65 67 L65 47 Z" 
                                  fill="url(#homeGradMobile)"
                                  opacity="1"
                                  filter="url(#homeGlowMobile)"
                                  class="home-icon-core"/>
                            
                            <!-- Big orbiting dots - very visible -->
                            <circle cx="50" cy="50" r="5" fill="#10b981" opacity="1" filter="url(#homeGlowMobile)" class="home-icon-orbit-dot1"/>
                            <circle cx="50" cy="50" r="5" fill="#06b6d4" opacity="1" filter="url(#homeGlowMobile)" class="home-icon-orbit-dot2"/>
                            <circle cx="50" cy="50" r="5" fill="#10b981" opacity="1" filter="url(#homeGlowMobile)" class="home-icon-orbit-dot3"/>
                        </svg>
                    </div>
                    <div class="bottom-nav-label">Home</div>
                </div>
                <div class="bottom-nav-item" data-section="gadgets">
                    <div class="bottom-nav-icon">
                        <svg width="32" height="32" viewBox="0 0 100 100" style="overflow: visible;">
                            <defs>
                                <linearGradient id="gadgetGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
                                </linearGradient>
                                <filter id="gadgetGlow">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>
                            
                            <!-- Phone outline -->
                            <rect x="25" y="15" width="50" height="70" rx="8" 
                                  fill="none" 
                                  stroke="url(#gadgetGrad)" 
                                  stroke-width="2.5"
                                  opacity="0.8"
                                  filter="url(#gadgetGlow)"
                                  class="gadget-icon-phone"/>
                            
                            <!-- Screen with circuit pattern -->
                            <rect x="30" y="22" width="40" height="50" rx="3" 
                                  fill="none" 
                                  stroke="url(#gadgetGrad)" 
                                  stroke-width="1.5"
                                  opacity="0.6"
                                  class="gadget-icon-screen"/>
                            
                            <!-- Circuit lines -->
                            <line x1="35" y1="35" x2="50" y2="35" stroke="#8b5cf6" stroke-width="2" class="gadget-icon-line1"/>
                            <line x1="50" y1="35" x2="50" y2="50" stroke="#ec4899" stroke-width="2" class="gadget-icon-line2"/>
                            <line x1="50" y1="50" x2="65" y2="50" stroke="#8b5cf6" stroke-width="2" class="gadget-icon-line3"/>
                            
                            <!-- Circuit nodes pulsing -->
                            <circle cx="50" cy="35" r="3" fill="#8b5cf6" filter="url(#gadgetGlow)" class="gadget-icon-node1"/>
                            <circle cx="50" cy="50" r="3" fill="#ec4899" filter="url(#gadgetGlow)" class="gadget-icon-node2"/>
                            
                            <!-- Energy pulse traveling -->
                            <circle cx="35" cy="35" r="2.5" fill="#8b5cf6" filter="url(#gadgetGlow)" class="gadget-icon-pulse"/>
                            
                            <!-- Bottom button -->
                            <circle cx="50" cy="78" r="4" 
                                    fill="none" 
                                    stroke="url(#gadgetGrad)" 
                                    stroke-width="2"
                                    filter="url(#gadgetGlow)"
                                    class="gadget-icon-button"/>
                        </svg>
                    </div>
                    <div class="bottom-nav-label">Gadgets</div>
                </div>
                <div class="bottom-nav-item" data-section="games">
                    <div class="bottom-nav-icon">
                        <svg width="32" height="32" viewBox="0 0 100 100" style="overflow: visible;">
                            <defs>
                                <linearGradient id="gameGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#ef4444;stop-opacity:1" />
                                </linearGradient>
                                <filter id="gameGlow">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>
                            
                            <!-- Controller body -->
                            <path d="M30 40 Q30 30 40 30 L60 30 Q70 30 70 40 L70 60 Q70 70 60 70 L40 70 Q30 70 30 60 Z" 
                                  fill="none" 
                                  stroke="url(#gameGrad)" 
                                  stroke-width="2.5"
                                  opacity="0.7"
                                  filter="url(#gameGlow)"
                                  class="game-icon-body"/>
                            
                            <!-- D-pad (left side) -->
                            <line x1="40" y1="50" x2="46" y2="50" stroke="#f59e0b" stroke-width="2.5" class="game-icon-dpad-h"/>
                            <line x1="43" y1="47" x2="43" y2="53" stroke="#f59e0b" stroke-width="2.5" class="game-icon-dpad-v"/>
                            
                            <!-- Action buttons (right side) - pulsing -->
                            <circle cx="60" cy="45" r="3" fill="#ef4444" filter="url(#gameGlow)" class="game-icon-btn1"/>
                            <circle cx="65" cy="50" r="3" fill="#f59e0b" filter="url(#gameGlow)" class="game-icon-btn2"/>
                            <circle cx="60" cy="55" r="3" fill="#ef4444" filter="url(#gameGlow)" class="game-icon-btn3"/>
                            <circle cx="55" cy="50" r="3" fill="#f59e0b" filter="url(#gameGlow)" class="game-icon-btn4"/>
                            
                            <!-- Trigger indicators (top) -->
                            <rect x="35" y="25" width="8" height="3" rx="1" fill="url(#gameGrad)" filter="url(#gameGlow)" class="game-icon-trigger-l"/>
                            <rect x="57" y="25" width="8" height="3" rx="1" fill="url(#gameGrad)" filter="url(#gameGlow)" class="game-icon-trigger-r"/>
                            
                            <!-- Energy waves -->
                            <circle cx="50" cy="50" r="15" fill="none" stroke="#f59e0b" stroke-width="1.5" opacity="0.4" class="game-icon-wave1"/>
                            <circle cx="50" cy="50" r="20" fill="none" stroke="#ef4444" stroke-width="1.5" opacity="0.3" class="game-icon-wave2"/>
                        </svg>
                    </div>
                    <div class="bottom-nav-label">Games</div>
                </div>
                <div class="bottom-nav-item" data-section="digital">
                    <div class="bottom-nav-icon">
                        <svg width="32" height="32" viewBox="0 0 100 100" style="overflow: visible;">
                            <defs>
                                <linearGradient id="digitalGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                                </linearGradient>
                                <filter id="digitalGlow">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>
                            
                            <!-- Card outline -->
                            <rect x="20" y="35" width="60" height="35" rx="5" 
                                  fill="none" 
                                  stroke="url(#digitalGrad)" 
                                  stroke-width="2.5"
                                  opacity="0.8"
                                  filter="url(#digitalGlow)"
                                  class="digital-icon-card"/>
                            
                            <!-- Magnetic stripe -->
                            <rect x="20" y="43" width="60" height="5" 
                                  fill="url(#digitalGrad)" 
                                  opacity="0.6"
                                  class="digital-icon-stripe"/>
                            
                            <!-- Chip (animated) -->
                            <rect x="28" y="52" width="12" height="10" rx="2" 
                                  fill="none" 
                                  stroke="#06b6d4" 
                                  stroke-width="1.5"
                                  filter="url(#digitalGlow)"
                                  class="digital-icon-chip"/>
                            <line x1="31" y1="52" x2="31" y2="62" stroke="#06b6d4" stroke-width="1" opacity="0.6"/>
                            <line x1="34" y1="52" x2="34" y2="62" stroke="#06b6d4" stroke-width="1" opacity="0.6"/>
                            <line x1="37" y1="52" x2="37" y2="62" stroke="#06b6d4" stroke-width="1" opacity="0.6"/>
                            
                            <!-- Card numbers (simplified) -->
                            <line x1="48" y1="55" x2="52" y2="55" stroke="#3b82f6" stroke-width="2" opacity="0.5" class="digital-icon-num1"/>
                            <line x1="54" y1="55" x2="58" y2="55" stroke="#06b6d4" stroke-width="2" opacity="0.5" class="digital-icon-num2"/>
                            <line x1="60" y1="55" x2="64" y2="55" stroke="#3b82f6" stroke-width="2" opacity="0.5" class="digital-icon-num3"/>
                            <line x1="66" y1="55" x2="70" y2="55" stroke="#06b6d4" stroke-width="2" opacity="0.5" class="digital-icon-num4"/>
                            
                            <!-- Scanning line (animated) -->
                            <line x1="20" y1="35" x2="80" y2="35" 
                                  stroke="#06b6d4" 
                                  stroke-width="2"
                                  filter="url(#digitalGlow)"
                                  opacity="0.8"
                                  class="digital-icon-scan"/>
                            
                            <!-- Data particles -->
                            <circle cx="45" cy="30" r="1.5" fill="#06b6d4" filter="url(#digitalGlow)" class="digital-icon-particle1"/>
                            <circle cx="55" cy="32" r="1.5" fill="#3b82f6" filter="url(#digitalGlow)" class="digital-icon-particle2"/>
                            <circle cx="50" cy="75" r="1.5" fill="#06b6d4" filter="url(#digitalGlow)" class="digital-icon-particle3"/>
                        </svg>
                    </div>
                    <div class="bottom-nav-label">Digital</div>
                </div>
                <div class="bottom-nav-item" data-section="settings">
                    <div class="bottom-nav-icon">
                        <svg width="32" height="32" viewBox="0 0 100 100" style="overflow: visible;">
                            <defs>
                                <linearGradient id="settingsGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#a78bfa;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
                                </linearGradient>
                                <filter id="settingsGlow">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>
                            
                            <!-- Main gear (rotating) -->
                            <circle cx="50" cy="50" r="18" 
                                    fill="none" 
                                    stroke="url(#settingsGrad)" 
                                    stroke-width="2.5"
                                    filter="url(#settingsGlow)"
                                    class="settings-icon-gear1"/>
                            
                            <!-- Gear teeth (main) -->
                            <circle cx="50" cy="32" r="3" fill="#a78bfa" filter="url(#settingsGlow)" class="settings-icon-tooth1"/>
                            <circle cx="68" cy="50" r="3" fill="#6366f1" filter="url(#settingsGlow)" class="settings-icon-tooth2"/>
                            <circle cx="50" cy="68" r="3" fill="#a78bfa" filter="url(#settingsGlow)" class="settings-icon-tooth3"/>
                            <circle cx="32" cy="50" r="3" fill="#6366f1" filter="url(#settingsGlow)" class="settings-icon-tooth4"/>
                            
                            <!-- Inner circle -->
                            <circle cx="50" cy="50" r="8" 
                                    fill="none" 
                                    stroke="url(#settingsGrad)" 
                                    stroke-width="2"
                                    opacity="0.8"
                                    class="settings-icon-inner"/>
                            
                            <!-- Smaller gear (counter-rotating) -->
                            <circle cx="70" cy="30" r="10" 
                                    fill="none" 
                                    stroke="#a78bfa" 
                                    stroke-width="2"
                                    opacity="0.6"
                                    filter="url(#settingsGlow)"
                                    class="settings-icon-gear2"/>
                            <circle cx="70" cy="30" r="4" 
                                    fill="none" 
                                    stroke="#6366f1" 
                                    stroke-width="1.5"
                                    opacity="0.7"/>
                            
                            <!-- Energy particles orbiting -->
                            <circle cx="50" cy="50" r="2" fill="#a78bfa" filter="url(#settingsGlow)" class="settings-icon-particle1"/>
                            <circle cx="50" cy="50" r="2" fill="#6366f1" filter="url(#settingsGlow)" class="settings-icon-particle2"/>
                            
                            <!-- Connection lines pulsing -->
                            <line x1="60" y1="40" x2="70" y2="30" 
                                  stroke="#6366f1" 
                                  stroke-width="1.5"
                                  opacity="0.5"
                                  class="settings-icon-connect"/>
                        </svg>
                    </div>
                    <div class="bottom-nav-label">More</div>
                </div>
                <div class="bottom-nav-item" data-section="admin" id="admin-bottom-nav" onclick="openAdminPanel()" style="display:none; color:#fbbf24;">
                    <div class="bottom-nav-icon">
                        <svg width="32" height="32" viewBox="0 0 100 100" style="overflow: visible;">
                            <defs>
                                <linearGradient id="adminGradMobile" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:1" />
                                </linearGradient>
                                <filter id="adminGlowMobile">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                </filter>
                            </defs>
                            <!-- Crown shape -->
                            <path d="M20 65 L28 38 L42 55 L50 28 L58 55 L72 38 L80 65 Z"
                                  fill="none"
                                  stroke="url(#adminGradMobile)"
                                  stroke-width="3"
                                  stroke-linejoin="round"
                                  filter="url(#adminGlowMobile)"/>
                            <!-- Crown base -->
                            <rect x="20" y="65" width="60" height="8" rx="3"
                                  fill="url(#adminGradMobile)"
                                  filter="url(#adminGlowMobile)"
                                  opacity="0.9"/>
                            <!-- Crown gems -->
                            <circle cx="50" cy="33" r="5" fill="#fbbf24" filter="url(#adminGlowMobile)"/>
                            <circle cx="28" cy="43" r="3.5" fill="#f59e0b" filter="url(#adminGlowMobile)"/>
                            <circle cx="72" cy="43" r="3.5" fill="#f59e0b" filter="url(#adminGlowMobile)"/>
                        </svg>
                    </div>
                    <div class="bottom-nav-label" style="color:#fbbf24;">Admin</div>
                </div>
            </div>
        </div>

    </div>

    <script type="module" src="./assets/app.module.js"></script>

<!-- ============================================ -->
<!-- EDIT & DELETE MODALS                        -->
<!-- ============================================ -->

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 500px; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 40px; border: 1px solid rgba(239, 68, 68, 0.3);">
        <div style="text-align: center; margin-bottom: 30px;">
            <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3);">
                <svg width="40" height="40" fill="none" stroke="white" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
            </div>
            <h2 style="font-size: 24px; margin-bottom: 12px; color: #ef4444; font-weight: 700;">Confirm Delete</h2>
            <p id="deleteMessage" style="color: #94a3b8; font-size: 15px; line-height: 1.6;"></p>
        </div>

        <div style="display: flex; gap: 12px;">
            <button onclick="closeDeleteModal()"
                    style="flex: 1; padding: 14px; background: rgba(148, 163, 184, 0.1); color: #f1f5f9; border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer;">
                Cancel
            </button>
            <button onclick="confirmDelete()"
                    style="flex: 1; padding: 14px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3);">
                Delete
            </button>
        </div>
    </div>
</div>

<!-- CSV Import Preview Modal -->
<div id="importPreviewModal" class="modal" style="display: none;" onclick="if(event.target===this){closeImportPreview();}">
    <div class="modal-content import-preview-modal-content" style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 24px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px;">
            <h2 id="import-preview-title" style="font-size: 22px; margin: 0; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;">Import Preview</h2>
            <button type="button" onclick="closeImportPreview()" style="background: rgba(148, 163, 184, 0.1); border: none; color: #94a3b8; width: 34px; height: 34px; border-radius: 8px; font-size: 20px; cursor: pointer; display:flex;align-items:center;justify-content:center;">×</button>
        </div>

        <div id="import-preview-summary" class="import-preview-summary">Review parsed rows before importing.</div>

        <div class="import-preview-table-wrap">
            <table class="import-preview-table">
                <thead id="import-preview-head"></thead>
                <tbody id="import-preview-body"></tbody>
            </table>
        </div>

        <div id="import-preview-footnote" class="import-preview-footnote"></div>

        <div style="display:flex;gap:12px;margin-top:16px;">
            <button type="button" onclick="closeImportPreview()" style="flex:1;padding:12px;background: rgba(148, 163, 184, 0.1); color: #f1f5f9; border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;">Cancel</button>
            <button type="button" id="import-preview-confirm-btn" onclick="confirmImportFromPreview()" style="flex:1.4;padding:12px;background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); color: white; border: none; border-radius: 10px; font-size: 14px; font-weight: 700; cursor: pointer;">Import</button>
        </div>
    </div>
</div>

<!-- Game Edit Modal -->
<div id="gameEditModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 30px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <h2 style="font-size: 24px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><line x1="6" y1="12" x2="10" y2="12"/><line x1="8" y1="10" x2="8" y2="14"/><line x1="15" y1="11" x2="15.01" y2="11" stroke-width="3"/><line x1="18" y1="13" x2="18.01" y2="13" stroke-width="3"/><path d="M4 8h16c.3 0 .6.1.8.3.2.2.3.5.2.8l-2 8c-.1.5-.6.9-1.2.9H6.2c-.6 0-1.1-.4-1.2-.9l-2-8c-.1-.3 0-.6.2-.8C3.4 8.1 3.7 8 4 8z"/></svg>Edit Game</h2>
            <button onclick="closeGameEditModal()" style="background: rgba(148, 163, 184, 0.1); border: none; color: #94a3b8; width: 36px; height: 36px; border-radius: 8px; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center;">×</button>
        </div>

        <form id="game-edit-form" onsubmit="updateGameFromModal(event)">
            <div style="display: grid; gap: 16px;">
                <div class="input-group">
                    <label>Title</label>
                    <input type="text" id="edit-gm-title" placeholder="e.g. God of War" required>
                </div>
                <div class="input-group">
                    <label>Platform</label>
                    <select id="edit-gm-platform" required></select>
                </div>
                <div class="input-group">
                    <label>Genre</label>
                    <select id="edit-gm-genre" required></select>
                </div>
                <div class="input-group">
                    <label>Metacritic Score <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                    <input type="text" id="edit-gm-metacritic-score" placeholder="e.g. 96">
                </div>
                <div class="input-group">
                    <label>Metacritic URL <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                    <input type="url" id="edit-gm-metacritic-url" placeholder="https://www.metacritic.com/..." autocapitalize="off" spellcheck="false">
                </div>
                <div class="input-group">
                    <label>Condition</label>
                    <select id="edit-gm-condition" required></select>
                </div>
                <div class="input-group">
                    <label>Buy Price (₹)</label>
                    <input type="number" id="edit-gm-buy-price" placeholder="0" required>
                </div>
                <div class="input-group">
                    <label>Purchase Date</label>
                    <input type="date" id="edit-gm-buy-date" required>
                </div>
                <div class="input-group">
                    <label>Sell Price (₹) <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                    <input type="number" id="edit-gm-sell-price" placeholder="Leave blank if owned">
                </div>
                <div class="input-group">
                    <label>Sell Date <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                    <input type="date" id="edit-gm-sell-date">
                </div>
                <div class="input-group">
                    <label>Notes</label>
                    <textarea id="edit-gm-notes" rows="2" placeholder="Any notes..."></textarea>
                </div>

                <!-- Game Image Upload -->
                <div class="input-group">
                    <label>Game Cover <span style="color:var(--text-muted);font-size:11px;">(click to change)</span></label>
                    <div onclick="openImagePicker('edit-game')" style="cursor: pointer; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; display: flex; align-items: center; gap: 12px; min-height: 48px; transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.borderColor='rgba(16, 185, 129, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                        <div id="edit-gm-image-preview-container" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#10b981;flex-shrink:0;"><path d="M6.5 9.5h11a4.5 4.5 0 0 1 4.33 5.72l-.48 1.63A2.25 2.25 0 0 1 19.2 18.5h-1.08a2.5 2.5 0 0 1-2.17-1.26l-.74-1.28h-6.42l-.74 1.28A2.5 2.5 0 0 1 5.88 18.5H4.8a2.25 2.25 0 0 1-2.15-1.65l-.48-1.63A4.5 4.5 0 0 1 6.5 9.5Z"/><path d="M9 12.15v2.7"/><path d="M7.65 13.5h2.7"/><circle cx="15.8" cy="12.7" r="0.95" fill="currentColor" stroke="none"/><circle cx="18.1" cy="14.3" r="0.95" fill="currentColor" stroke="none"/></svg>
                            <div style="font-size: 13px; color: var(--text-muted);">Click to add/change cover</div>
                        </div>
                        <input type="hidden" id="edit-gm-final-image-url" value="">
                    </div>
                </div>
            </div>
            <div style="display: flex; gap: 12px; margin-top: 24px;">
                <button type="button" onclick="closeGameEditModal()"
                        style="flex: 1; padding: 14px; background: rgba(148, 163, 184, 0.1); color: #f1f5f9; border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer;">
                    Cancel
                </button>
                <button type="submit"
                        style="flex: 2; padding: 14px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); color: white; border: none; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:5px;"><polyline points="20 6 9 17 4 12"/></svg>Save Changes
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Gadget Edit Modal -->
<div id="gadgetEditModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 30px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <h2 style="font-size: 24px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="5" y="2" width="14" height="20" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>Edit Gadget</h2>
            <button onclick="closeGadgetEditModal()" style="background: rgba(148, 163, 184, 0.1); border: none; color: #94a3b8; width: 36px; height: 36px; border-radius: 8px; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center;">×</button>
        </div>

        <form id="gadget-edit-form" onsubmit="updateGadgetFromModal(event)">
            <div style="display: grid; gap: 16px;">
                <div class="input-group">
                    <label>Name</label>
                    <input type="text" id="edit-g-name" placeholder="e.g. iPhone 15 Pro" required>
                </div>
                <div class="input-group">
                    <label>Category</label>
                    <select id="edit-g-category" required></select>
                </div>
                <div class="input-group">
                    <label>Buy Price (₹)</label>
                    <input type="number" id="edit-g-price" placeholder="0" required>
                </div>
                <div class="input-group">
                    <label>Purchase Date</label>
                    <input type="date" id="edit-g-date" required>
                </div>
                <div class="input-group">
                    <label>Sell Price (₹) <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                    <input type="number" id="edit-g-sell-price" placeholder="Leave blank if owned">
                </div>
                <div class="input-group">
                    <label>Sell Date <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                    <input type="date" id="edit-g-sell-date">
                </div>

                <!-- Clickable Image Icon -->
                <div class="input-group">
                    <label>Product Image <span style="color:var(--text-muted);font-size:11px;">(click to change)</span></label>
                    <div onclick="openImagePicker('edit-gadget')" style="cursor: pointer; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; display: flex; align-items: center; gap: 12px; min-height: 48px; transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.borderColor='rgba(16, 185, 129, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                        <div id="edit-g-image-preview-container" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#10b981;flex-shrink:0;"><rect x="7.2" y="2.5" width="9.6" height="19" rx="2.2"/><path d="M10 5.5h4"/><circle cx="12" cy="18.1" r="0.8" fill="currentColor" stroke="none"/><path d="M3.3 9.8h2.8"/><path d="M3.3 14.2h2.8"/><path d="M17.9 9.8h2.8"/><path d="M17.9 14.2h2.8"/></svg>
                            <div style="font-size: 13px; color: var(--text-muted);">Click to add/change image</div>
                        </div>
                        <input type="hidden" id="edit-g-final-image-url" value="">
                    </div>
                </div>

                <!-- Condition Field -->
                <div class="input-group">
                    <label>Condition <span style="color:var(--text-muted);font-size:11px;">(optional)</span></label>
                    <select id="edit-g-condition">
                        <option value="">Select condition</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Notes</label>
                    <textarea id="edit-g-notes" rows="2" placeholder="Any notes..."></textarea>
                </div>
            </div>
            <div style="display: flex; gap: 12px; margin-top: 24px;">
                <button type="button" onclick="closeGadgetEditModal()"
                        style="flex: 1; padding: 14px; background: rgba(148, 163, 184, 0.1); color: #f1f5f9; border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer;">
                    Cancel
                </button>
                <button type="submit"
                        style="flex: 2; padding: 14px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); color: white; border: none; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:5px;"><polyline points="20 6 9 17 4 12"/></svg>Save Changes
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Digital Edit Modal -->
<div id="digitalEditModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 30px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <h2 style="font-size: 24px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>Edit Digital Purchase</h2>
            <button onclick="closeDigitalEditModal()" style="background: rgba(148, 163, 184, 0.1); border: none; color: #94a3b8; width: 36px; height: 36px; border-radius: 8px; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center;">×</button>
        </div>

        <form id="digital-edit-form" onsubmit="updateDigitalFromModal(event)">
            <div style="display: grid; gap: 16px;">
                <div class="input-group">
                    <label>Service/Product Name</label>
                    <input type="text" id="edit-d-name" placeholder="e.g. Netflix" required>
                </div>
                <div class="input-group">
                    <label>Type</label>
                    <select id="edit-d-type" required></select>
                </div>
                <div class="input-group">
                    <label>Price (₹)</label>
                    <input type="number" id="edit-d-price" placeholder="0" required>
                </div>
                <div class="input-group">
                    <label>Purchase Date</label>
                    <input type="date" id="edit-d-date" required>
                </div>
                <div class="input-group">
                    <label>Validity Period</label>
                    <select id="edit-d-validity" onchange="toggleEditCustomValidity()">
                        <option value="">No expiry</option>
                        <option value="1">1 Month</option>
                        <option value="3">3 Months</option>
                        <option value="6">6 Months</option>
                        <option value="12">1 Year</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                <div class="input-group" id="edit-custom-validity-group" style="display: none;">
                    <label>Custom Duration (months)</label>
                    <input type="number" id="edit-d-custom-months" placeholder="e.g. 18" min="1">
                </div>
                <!-- Clickable Image Icon for Digital Edit -->
                <div class="input-group">
                    <label>Service Icon <span style="color:var(--text-muted);font-size:11px;">(click to change)</span></label>
                    <div onclick="openImagePicker('edit-digital')" style="cursor: pointer; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; display: flex; align-items: center; gap: 12px; min-height: 48px; transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.borderColor='rgba(16, 185, 129, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                        <div id="edit-d-image-preview-container" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#10b981;flex-shrink:0;"><rect x="2.5" y="4" width="19" height="16" rx="2.5"/><path d="M2.5 8.5h19"/><circle cx="6.1" cy="6.2" r="0.7" fill="currentColor" stroke="none"/><circle cx="9.1" cy="6.2" r="0.7" fill="currentColor" stroke="none"/><path d="m8.4 15.2 2.5 2.5 4.8-5"/></svg>
                            <div style="font-size: 13px; color: var(--text-muted);">Click to add/change icon</div>
                        </div>
                        <input type="hidden" id="edit-d-final-image-url" value="">
                    </div>
                </div>
                <div class="input-group">
                    <label>Notes</label>
                    <textarea id="edit-d-notes" rows="2" placeholder="Any notes..."></textarea>
                </div>
            </div>
            <div style="display: flex; gap: 12px; margin-top: 24px;">
                <button type="button" onclick="closeDigitalEditModal()"
                        style="flex: 1; padding: 14px; background: rgba(148, 163, 184, 0.1); color: #f1f5f9; border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer;">
                    Cancel
                </button>
                <button type="submit"
                        style="flex: 2; padding: 14px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); color: white; border: none; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:5px;"><polyline points="20 6 9 17 4 12"/></svg>Save Changes
                </button>
            </div>
        </form>
    </div>
</div>

<!-- ============================================ -->
<!-- ENCRYPTION MODALS & UI                      -->
<!-- ============================================ -->

<!-- Encryption Setup Modal (for new users) -->
<div id="encryptionSetupModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 40px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <div style="text-align: center; margin-bottom: 30px;">
            <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);">
                <svg width="40" height="40" fill="none" stroke="white" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
            </div>
            <h2 style="font-size: 28px; margin-bottom: 12px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;">Enable End-to-End Encryption</h2>
            <p style="color: #94a3b8; font-size: 15px; line-height: 1.6;">Your data will be encrypted using AES-256 encryption before being stored.</p>
        </div>

        <div style="background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 15px; margin-bottom: 25px;">
            <p style="color: #ef4444; margin: 0; font-weight: 600; font-size: 14px;">
                Important: Store your password securely. If you lose it, your data cannot be recovered.
            </p>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display: block; color: #94a3b8; margin-bottom: 8px; font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Create Master Password</label>
            <input type="password" id="masterPassword" placeholder="Enter a strong password (min 8 characters)"
                   onkeypress="if(event.key==='Enter') document.getElementById('masterPasswordConfirm').focus()"
                   style="width: 100%; padding: 14px 16px; background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 10px; color: #f1f5f9; font-size: 15px;">
        </div>

        <div style="margin-bottom: 30px;">
            <label style="display: block; color: #94a3b8; margin-bottom: 8px; font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Confirm Master Password</label>
            <input type="password" id="masterPasswordConfirm" placeholder="Re-enter your password"
                   onkeypress="if(event.key==='Enter') setupEncryption()"
                   style="width: 100%; padding: 14px 16px; background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 10px; color: #f1f5f9; font-size: 15px;">
        </div>

        <div style="display: flex; gap: 12px;">
            <button onclick="skipEncryptionSetup()"
                    style="flex: 1; padding: 16px; background: rgba(148, 163, 184, 0.1); color: #f1f5f9; border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;"
                    onmouseover="this.style.background='rgba(148, 163, 184, 0.2)'"
                    onmouseout="this.style.background='rgba(148, 163, 184, 0.1)'">
                Cancel
            </button>
            <button onclick="setupEncryption()"
                    style="flex: 2; padding: 16px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3); transition: all 0.3s ease;"
                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 32px rgba(16, 185, 129, 0.5)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(16, 185, 129, 0.3)'">
                <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:5px;"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>Enable Encryption
            </button>
        </div>

        <div style="margin-top: 25px; padding-top: 25px; border-top: 1px solid rgba(148, 163, 184, 0.1);">
            <p style="color: #64748b; font-size: 12px; text-align: center; margin: 0;">
                Your data is encrypted locally before storage<br>
                Only you have the decryption key<br>
                No one else can access your encrypted data
            </p>
        </div>
    </div>
</div>

<!-- Unlock Modal (for returning users) -->
<div id="unlockModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 500px; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 40px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <div style="text-align: center; margin-bottom: 30px;">
            <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);">
                <svg width="40" height="40" fill="none" stroke="white" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z" />
                </svg>
            </div>
            <h2 style="font-size: 28px; margin-bottom: 12px; color: #f1f5f9; font-weight: 700;">Welcome Back!</h2>
            <p style="color: #94a3b8; font-size: 15px;">Enter your master password to unlock your encrypted data.</p>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display: block; color: #94a3b8; margin-bottom: 8px; font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Master Password</label>
            <input type="password" id="unlockPassword" placeholder="Enter your master password"
                   style="width: 100%; padding: 14px 16px; background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 10px; color: #f1f5f9; font-size: 15px;"
                   onkeypress="if(event.key==='Enter') unlockData()">
        </div>

        <div id="unlockError" style="color: #ef4444; margin-bottom: 20px; font-size: 14px; font-weight: 600; display: none; padding: 12px; background: rgba(239, 68, 68, 0.15); border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);"></div>

        <button onclick="unlockData()"
                style="width: 100%; padding: 16px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:5px;"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>Unlock My Data
        </button>

        <div style="margin-top: 25px; padding-top: 25px; border-top: 1px solid rgba(148, 163, 184, 0.1);">
            <p style="color: #64748b; font-size: 12px; text-align: center; margin: 0;">
                Forgot your password? Unfortunately, encrypted data cannot be recovered without it.
            </p>
        </div>
    </div>
</div>

<!-- Encryption Indicator Badge -->
<div class="encryption-indicator" style="position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); padding: 12px 20px; border-radius: 12px; color: white; font-size: 12px; font-weight: 600; display: none; align-items: center; gap: 8px; box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3); z-index: 9999; animation: pulse 2s infinite;">
    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
    </svg>
    <span>End-to-End Encrypted</span>
</div>
<script src="./assets/app.ui.js"></script>

<!-- Image Picker Modal -->
<div id="imagePickerModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 500px; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 20px; padding: 24px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="font-size: 20px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:6px;"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>Add Product Image</h2>
            <button onclick="closeImagePicker()" style="background: rgba(148, 163, 184, 0.1); border: none; color: #94a3b8; width: 32px; height: 32px; border-radius: 8px; font-size: 18px; cursor: pointer;">×</button>
        </div>

        <!-- Image Tabs -->
        <div class="image-tabs">
            <button type="button" class="tab-btn active" onclick="switchImageTab(event, 'picker-url')"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px;"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>URL</button>
            <button type="button" class="tab-btn" onclick="switchImageTab(event, 'picker-upload')"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>Upload</button>
        </div>

        <!-- Tab 1: URL (Default) -->
        <div id="picker-url" class="tab-content active">
            <div style="border: 2px dashed rgba(16, 185, 129, 0.3); border-radius: 8px; padding: 16px; background: rgba(16, 185, 129, 0.05); text-align: center; margin-bottom: 10px;">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-bottom:6px;color:#10b981;"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                <div style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--text-secondary);">Paste an image URL</div>
                <div style="display:flex; gap:6px; align-items:center;">
                    <input type="text" id="picker-image-url" placeholder="https://example.com/image.jpg"
                           style="flex:1; padding:9px 12px; background:rgba(15,23,42,0.8); border:1px solid rgba(148,163,184,0.2); border-radius:8px; color:#f1f5f9; font-size:13px; font-family:inherit; outline:none;">
                    <button type="button" onclick="previewPickerUrl()"
                            style="padding:9px 14px; background:linear-gradient(135deg,#10b981,#06b6d4); border:none; border-radius:8px; color:white; font-size:12px; font-weight:700; cursor:pointer; white-space:nowrap;">
                        Preview
                    </button>
                </div>
            </div>
            <div id="picker-url-preview" class="upload-preview" style="display: none; margin: 0 auto;">
                <img id="picker-url-img" src="" alt="Preview">
            </div>
        </div>

        <!-- Tab 2: Upload -->
        <div id="picker-upload" class="tab-content">
            <input type="file" id="picker-file-input" accept="image/*" style="display: none;" onchange="pickerHandleUpload(event)">
            <div class="upload-placeholder" onclick="document.getElementById('picker-file-input').click()">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-bottom:6px;color:#10b981;"><polyline points="16 16 12 12 8 16"/><line x1="12" y1="12" x2="12" y2="21"/><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"/></svg>
                <div style="font-size: 12px; font-weight: 600; margin-bottom: 4px;">Click to upload</div>
                <div style="font-size: 11px; color: var(--text-muted);">or drag and drop</div>
            </div>
            <div id="picker-upload-preview" class="upload-preview" style="display: none; margin: 8px auto 0;">
                <img id="picker-upload-img" src="" alt="Preview">
            </div>
        </div>

        <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button type="button" onclick="closeImagePicker()"
                    style="flex: 1; padding: 12px; background: rgba(148, 163, 184, 0.1); color: #f1f5f9; border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;">
                Cancel
            </button>
            <button type="button" onclick="savePickedImage()"
                    style="flex: 2; padding: 12px; background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%); color: white; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:5px;"><polyline points="20 6 9 17 4 12"/></svg>Save Image
            </button>
        </div>
    </div>
</div>

<script src="./assets/pwa-install.js"></script>


</body>
</html>
