<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MyCollection</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f0f23;
  color:#fff;
}
.sidebar{
  position:fixed;
  left:0;
  top:0;
  width:220px;
  height:100vh;
  background:#1a1a2e;
  padding:20px;
}
.sidebar div{
  margin:15px 0;
  cursor:pointer;
}
.main{
  margin-left:240px;
  padding:20px;
}
.section{display:none}
.section.active{display:block}
.card{
  background:#16213e;
  padding:12px;
  margin:10px 0;
  border-radius:8px;
}
input,button{
  display:block;
  margin:8px 0;
  padding:8px;
}
button{
  background:#00f5ff;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="sidebar">
  <h2>ðŸš€ MyCollection</h2>
  <div onclick="showSection('dashboard')">Dashboard</div>
  <div onclick="showSection('gadgets')">Gadgets</div>
  <div onclick="showSection('games')">Games</div>
</div>

<div class="main">

<div id="dashboard" class="section active">
  <h2>Dashboard</h2>
  <div>Total Gadgets: <span id="statGadgets">0</span></div>
  <div>Total Games: <span id="statGames">0</span></div>
</div>

<div id="gadgets" class="section">
  <h2>Gadgets</h2>
  <input id="gName" placeholder="Gadget name">
  <input id="gPrice" type="number" placeholder="Price">
  <button onclick="addGadget()">Add Gadget</button>
  <div id="gadgetList"></div>
</div>

<div id="games" class="section">
  <h2>Games</h2>
  <input id="gmTitle" placeholder="Game title">
  <input id="gmBuy" type="number" placeholder="Buy price">
  <input id="gmSell" type="number" placeholder="Sell price (optional)">
  <button onclick="addGame()">Add Game</button>
  <div id="gameList"></div>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAJtyDC0fI_AzGcKxVHBvF-Focs4doWxMM",
  authDomain: "tech-tracker-87dbc.firebaseapp.com",
  projectId: "tech-tracker-87dbc"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let gadgets = [];
let games = [];

window.showSection = function(id){
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
};

window.addGadget = async function(){
  const name = document.getElementById("gName").value;
  const price = Number(document.getElementById("gPrice").value);
  if(!name || isNaN(price)) return;

  const obj = { name, price };
  await addDoc(collection(db,"gadgets"), obj);
  gadgets.push(obj);
  render();
};

window.addGame = async function(){
  const title = document.getElementById("gmTitle").value;
  const buy = Number(document.getElementById("gmBuy").value);
  const sellRaw = document.getElementById("gmSell").value;
  const sell = sellRaw ? Number(sellRaw) : null;
  if(!title || isNaN(buy)) return;

  const obj = { title, buy, sell };
  await addDoc(collection(db,"games"), obj);
  games.push(obj);
  render();
};

async function loadData(){
  const gSnap = await getDocs(collection(db,"gadgets"));
  gSnap.forEach(d => gadgets.push(d.data()));

  const gmSnap = await getDocs(collection(db,"games"));
  gmSnap.forEach(d => games.push(d.data()));

  render();
}

function render(){
  document.getElementById("gadgetList").innerHTML =
    gadgets.map(g => `<div class="card">${g.name} â€“ â‚¹${g.price}</div>`).join("");

  document.getElementById("gameList").innerHTML =
    games.map(g => `<div class="card">${g.title} â€“ â‚¹${g.buy}</div>`).join("");

  document.getElementById("statGadgets").textContent = gadgets.length;
  document.getElementById("statGames").textContent = games.length;
}

loadData();
</script>

</body>
</html>
