<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tech & Games Tracker</title>

<style>
body {
    font-family: Arial, sans-serif;
    background:#0f172a;
    color:white;
    padding:20px;
}

h1 {
    color:#22d3ee;
}

.container {
    display:flex;
    gap:40px;
    flex-wrap:wrap;
}

.card {
    background:#1e293b;
    padding:20px;
    border-radius:12px;
    width:400px;
}

input, select, button {
    width:100%;
    padding:8px;
    margin-top:8px;
    border-radius:6px;
    border:none;
}

button {
    background:#22d3ee;
    font-weight:bold;
    cursor:pointer;
}

.item {
    background:#334155;
    padding:10px;
    margin-top:10px;
    border-radius:6px;
}
</style>
</head>

<body>

<h1>Tech & Game Tracker</h1>

<div class="container">

<!-- GADGET SECTION -->
<div class="card">
<h2>Add Gadget Expense</h2>

<input id="gadgetName" placeholder="Gadget Name">
<input id="gadgetPrice" type="number" placeholder="Price">
<button onclick="addGadget()">Save Gadget</button>

<h3>Saved Gadgets</h3>
<div id="gadgetList"></div>
</div>


<!-- GAME SECTION -->
<div class="card">
<h2>Add Game Disc</h2>

<input id="gameTitle" placeholder="Game Title">
<input id="buyPrice" type="number" placeholder="Buy Price">
<input id="sellPrice" type="number" placeholder="Sell Price (optional)">
<button onclick="addGame()">Save Game</button>

<h3>Saved Games</h3>
<div id="gameList"></div>
</div>

</div>


<!-- Firebase Scripts -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAJtyDC0fI_AzGcKxVHBvF-Focs4doWxMM",
  authDomain: "tech-tracker-87dbc.firebaseapp.com",
  projectId: "tech-tracker-87dbc",
  storageBucket: "tech-tracker-87dbc.firebasestorage.app",
  messagingSenderId: "446800872416",
  appId: "1:446800872416:web:8d094886bf870c9669a185",
  measurementId: "G-GSWW5KLR2H"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);


async function addGadget() {

    const name = document.getElementById("gadgetName").value;
    const price = document.getElementById("gadgetPrice").value;

    await addDoc(collection(db,"gadgets"), {
        name,
        price,
        date:new Date().toISOString()
    });

    loadGadgets();
}


async function addGame() {

    const title = document.getElementById("gameTitle").value;
    const buyPrice = document.getElementById("buyPrice").value;
    const sellPrice = document.getElementById("sellPrice").value;

    await addDoc(collection(db,"games"), {
        title,
        buyPrice,
        sellPrice,
        date:new Date().toISOString()
    });

    loadGames();
}


async function loadGadgets() {

    const querySnapshot = await getDocs(collection(db,"gadgets"));
    const list = document.getElementById("gadgetList");

    list.innerHTML="";

    querySnapshot.forEach(doc => {

        const g = doc.data();

        list.innerHTML += `
        <div class="item">
            ${g.name} - ₹${g.price}
        </div>`;
    });

}


async function loadGames() {

    const querySnapshot = await getDocs(collection(db,"games"));
    const list = document.getElementById("gameList");

    list.innerHTML="";

    querySnapshot.forEach(doc => {

        const g = doc.data();

        let profit = g.sellPrice ? g.sellPrice - g.buyPrice : "Not sold";

        list.innerHTML += `
        <div class="item">
            ${g.title}<br>
            Buy ₹${g.buyPrice} | Sell ₹${g.sellPrice || "-"}<br>
            Profit: ${profit}
        </div>`;
    });

}


loadGadgets();
loadGames();

</script>

</body>
</html>
